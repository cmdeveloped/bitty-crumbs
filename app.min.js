"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Game=function(){function t(e){_classCallCheck(this,t),this.missed=0,this.win=0,this.lost=0,this.phrases=e,this.selected=null}return _createClass(t,[{key:"startGame",value:function(){var e=this.getRandomPhrase(),t=new Phrase(e);(this.selected=t).addPhraseToDom()}},{key:"getRandomPhrase",value:function(){var e=this.phrases;return e[Math.floor(Math.random()*e.length)]}},{key:"handleInteraction",value:function(e){var t=this.selected.checkLetter(e);console.log(t),t?this.checkWin():this.removeLife()}},{key:"checkWin",value:function(){$(".letter.hide").length||this.gameOver(!0)}},{key:"removeLife",value:function(){var e=$("#lives .life"),t=this.missed;$(e[t]).addClass("missed"),this.missed++,5===this.missed&&this.gameOver(!1)}},{key:"gameOver",value:function(e){e?this.win++:this.lost++;var t=e?"won":"lost",a=e?this.win:this.lost,n=e?"You win!":"Sorry! Try Again.";$("#score .".concat(t," span")).text(a),$("#result .message").append('<h2 class="display-3">'.concat(n,"</h2>")),$("#result").addClass(t).removeAttr("hidden")}}]),t}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var game,Phrase=function(){function t(e){_classCallCheck(this,t),this.phrase=e}return _createClass(t,[{key:"addPhraseToDom",value:function(){var e=$("#bitty").empty(),t=this.phrase.split(" "),a=!0,n=!1,r=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var o=s.value,l="",c=!0,u=!1,h=void 0;try{for(var f,d=o[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var v=f.value,y=new RegExp(/^[A-Za-z]$/);v=v.toLowerCase(),y.test(v)?l+='<span class="letter hide char-'.concat(v,'">').concat(v,"</span>"):l+='<span class="character">'.concat(v,"</span>")}}catch(e){u=!0,h=e}finally{try{c||null==d.return||d.return()}finally{if(u)throw h}}e.append('<div class="word">'.concat(l,"</div>"))}}catch(e){n=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"checkLetter",value:function(e){return!!this.phrase.toLowerCase().includes(e)&&(this.showLetter(e),!0)}},{key:"showLetter",value:function(e){$(".char-".concat(e)).removeClass("hide")}}]),t}(),initKeyboard=function(){var d=$("#crumbs"),v="../data/keys.json",y="";$.getJSON(v,function(e){v=Object.keys(e);var t=!0,a=!1,n=void 0;try{for(var r,s=v[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var i=r.value;y+='<div class="'.concat(i,'">');var o=!0,l=!1,c=void 0;try{for(var u,h=e[i][Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var f=u.value;y+='<button type="button" class="key secondary" value="'.concat(f,'">').concat(f,"</button>")}}catch(e){l=!0,c=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw c}}y+="</div>"}}catch(e){a=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}d.append(y)})},phrases="../data/phrases.json",loadPhrases=function(){$.getJSON(phrases,function(e){phrases=e})},resetGame=function(){game.startGame(),game.missed=0,$(".fa-heart").removeClass("missed"),$("#result").removeClass("won lost").attr("hidden",!0).find(".message").empty()};$(document).ready(function(){initKeyboard(),loadPhrases(),$("button[name=start]").on("click",function(){$("#splash").hide(),(game=new Game(phrases)).startGame()}),$("button[name=replay]").on("click",function(){resetGame()}),$("#crumbs").on("click",".key",function(e){var t=e.target.value;game.handleInteraction(t)})});